cmake_minimum_required(VERSION 2.8)

SET(PROJ_NAME "AdonEngine")
SET(EXECUTABLE_NAME "Test")

SET(PROJ_PATH ${CMAKE_SOURCE_DIR})
SET(PROJ_OUT_PATH ${CMAKE_BINARY_DIR})
SET(PROJ_TEST ${PROJ_PATH}/test)
SET(PROJ_GRAPHICS_INCLUDE_PATH ${PROJ_PATH}/include/Graphics)
SET(PROJ_GRAPHICS_SOURCE_PATH ${PROJ_PATH}/src/Graphics)
SET(LIB_DESTINATION ${PROJ_PATH}/lib)

SET(PROJ_INCLUDES "deps/GLEW" "deps/GLFW" "include" "include/Graphics")

SET(PROJ_LIBRARIES ${PROJ_PATH}/deps/GLEW/glew32s.lib ${PROJ_PATH}/deps/GLFW/glfw3.lib)
SET(ADON_LIBRARY ${PROJ_PATH}/lib/AdonEngine.lib)

FIND_PACKAGE(OpenGL)

### ----- Adon Engine -----###

project(${PROJ_NAME})

INCLUDE_DIRECTORIES(${PROJ_INCLUDES})
LINK_DIRECTORIES(${PROJ_LIBRARIES})

FILE(GLOB SRC ${PROJ_GRAPHICS_SOURCE_PATH}/*.cc)
FILE(GLOB HEAD ${PROJ_GRAPHICS_INCLUDE_PATH}/*.h)
LIST(APPEND SRCSGRAPHICS ${SRC} ${HEAD})
SOURCE_GROUP(Graphics FILES ${SRCSGRAPHICS})

LIST(APPEND ALLSRCS ${SRCSGRAPHICS})

add_library(${PROJ_NAME} STATIC ${ALLSRCS})

SET_TARGET_PROPERTIES(${PROJ_NAME} PROPERTIES LINKER_LANGUAGE C++)

TARGET_LINK_LIBRARIES(${PROJ_NAME} ${PROJ_LIBRARIES} ${OPENGL_LIBRARIES})

install(
	TARGETS ${PROJ_NAME}
	RUNTIME DESTINATION ${LIB_DESTINATION}
	ARCHIVE DESTINATION ${LIB_DESTINATION}
	LIBRARY DESTINATION ${LIB_DESTINATION})

##COMMENT
#install(TARGET ${PROJ_NAME} ${PROJ_INCLUDES} includes)##
##

### ---- Test Executable ---- ###

LINK_DIRECTORIES(${LIB_DESTINATION}/${PROJ_NAME}.lib)

FILE(GLOB HEAD ${PROJ_TEST}/*.h)
FILE(GLOB SRCS ${PROJ_TEST}/*.cc)
LIST(APPEND SRCSMAIN ${HEAD} ${SRCS})
SOURCE_GROUP(Main FILES ${SRCSMAIN})

FILE(GLOB HEADGRAPH ${PROJ_GRAPHICS_INCLUDE_PATH}/*.h)
LIST(APPEND SRCSGRAPHICSMAIN ${HEADGRAPH} ${HEADSRC})
SOURCE_GROUP(Graphics FILES ${SRCSGRAPHICSMAIN})

LIST(APPEND ALLSRCSMAIN ${SRCSMAIN} ${SRCSGRAPHICSMAIN})

ADD_EXECUTABLE(${EXECUTABLE_NAME} ${ALLSRCSMAIN})
TARGET_LINK_LIBRARIES(${EXECUTABLE_NAME} ${ADON_LIBRARY} ${OPENGL_LIBRARIES})